<!DOCTYPE html>
<html><head>
<meta http-equiv="content-type" content="text/html; charset=UTF-8">
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    
   	<title>HTML/CSS/JS 在线工具</title>
			<script src="res/hm.js"></script><script src="res/codemirror.min.js"></script>
		<script src="res/simple.min.js"></script>
		<link rel="stylesheet" href="res/codemirror.min.css">
    <link rel="stylesheet" href="res/material.min.css">
    
				
		<script src="res/htmlmixed.js"></script>
				
		<script src="res/css.js"></script>
				
		<script src="res/javascript.js"></script>
				
		<script src="res/xml.js"></script>
						<script src="res/format.js"></script>
						
    	
    <!-- Bootstrap Core CSS -->
	<link rel="stylesheet" href="res/bootstrap.min.css">

   <!-- Custom Fonts -->
   <link href="res/all.min.css" rel="stylesheet" type="text/css">
    <!--[if lt IE 9]> 
        <script src="https://lf3-cdn-tos.bytecdntp.com/cdn/expire-1-M/html5shiv/r29/html5.min.js"></script>
        <script src="https://lf3-cdn-tos.bytecdntp.com/cdn/expire-1-M/respond.js/1.4.2/respond.min.js"></script>
    <![endif]-->
    <!-- PHP 代码 -->
    <link rel="stylesheet" href="res/style.css">

    <script src="res/jquery.min.js"></script>
  <script src="res/clipboard.min.js"></script>
<style type="text/css">
		[mt_node=trans_loading]::after{
		content: '';
		vertical-align: middle !important;
		width: 1em !important;
		height: 1em !important;
		display: inline-block !important;
		margin: 0 4px !important;
		border: 2px rgba(0, 0, 0, 0.25) solid !important;
		border-top: 2px rgba(0, 0, 0, 1) solid !important;
		border-radius: 50% !important;
		padding: 0 !important;
		-webkit-animation: immersive-translate-loading-animation 0.6s infinite linear !important;
		animation: immersive-translate-loading-animation 0.6s infinite linear !important;
		}

		@keyframes immersive-translate-loading-animation {
			from {
				transform: rotate(0deg,0deg,0deg);
			}
			to {
				transform: rotate(359deg,0deg,0deg);
			}
		}
	</style><style type="text/css">[mt_node^=trans]{display: none !important;}</style></head>

<body>
<script>
var is_home = false;
</script>
<style>
.runoob-page-content {
    margin: 0 20px;
}
</style>


<div class="runoob-page-content"><link rel="stylesheet" href="res/jqx.base.css" type="text/css">
<link rel="stylesheet" href="res/material.min_002.css">
<script type="text/javascript" src="res/jqxcore.js"></script>
<script type="text/javascript" src="res/jqxsplitter.js"></script>
<script src="res/closetag.min.js"></script>
<script src="res/closebrackets.js"></script>
<script src="res/placeholder.js"></script>
<script src="res/download.min.js"></script>
<script src="res/beautify-html.min.js"></script>
<style type="text/css">
.container{ 
    width: 100%;
}

.CodeMirror {
    border: 0px solid #fff; 
    height: auto;
    font-size: 14px;
    line-height: 18px;
}
/*
.CodeMirror pre {
    word-wrap: break-word;
    white-space: pre-wrap;
    word-break: keep-all;
}*/
table td {
    word-wrap: break-word;
    word-break: break-all;
}
.modal-dialog  {
    width: 800px;
}
#output {
    width: 100%;
    height: 100%;
}
#iframeResult {
    display:block;
    overflow:hidden;
    border:0!important;
    min-width:100px;
    width:100%;
    height:100%;
    background-color:#fff
}
</style>
    

<div class="row" id="runoob-content">
    <div class="col-md-12">
        <a href="https://josiahbristow.github.io" class="btn btn-dark mr-sm-1" target="_blank"><i class="fas fa-th-list"></i> 返回主页</a>
        <div class="card">
            
            <div class="card-header">
            <form class="form-inline" role="form">
            
            <label style="margin-right:12px;"><strong style="font-size: 16px"><i class="fa fa-cogs"></i> HTML/CSS/JS 在线工具</strong></label>

                                                     <!-- <button type="button" class="btn btn-warning" id="librep">选择库</button>-->
                   <button type="button" class="btn btn-info mr-sm-1" id="basehtml"><i class="fab fa-html5"></i> HTML 模板</button>
                 <div class="form-group">
                 <select class="form-control mr-sm-1" id="sel1">
                 <option value="nourl" selected="selected"> 选择库...</option>
                 <option value="jq">使用 jQuery 2.2.4</option>
                 <option value="bs3">使用 Bootstrap 3.3.7</option>
                 <option value="bs4">使用 Bootstrap 4.6.0</option>
                 <option value="ag">使用 Angular 1.6.6</option>
                 <option value="vue2">使用 Vue 2.2.2</option>
                 <option value="vue3">使用 Vue 3.2.33</option>
                 <option value="fa">使用 Font Awesome 4.7.0</option> 
                 <option value="more">更多……</option>
                   </select>
                 <button type="button" class="btn btn-warning mr-sm-1" id="downloadCode"><i class="fas fa-cloud-download-alt"></i> 下载</button>
                 <button type="button" class="btn btn-primary mr-sm-1" id="runcode"><i class="fa fa-paper-plane"></i> 运行</button>
                 <label>
                <input type="checkbox" id="isautorun" checked="checked">自动执行
                </label>

                <label><span class="badge badge-danger">外部资源请使用 https 协议</span> </label>
                   </div>
                  
                 
                        <div class="form-group alert alert-danger" style="display:none;padding: 6px;"><i class="fa fa-exclamation-triangle" aria-hidden="true"></i> <span> 错误！请进行一些更改。</span></div>

            </form>
    
             </div>
             <div class="card-body" style="padding:0;"> 
             <form role="form" id="compiler-form">
             <div id="splitContainer" style="height: 619px; width: 100%;" class="jqx-reset jqx-splitter jqx-widget jqx-widget-content">
                <div style="left: 0px; top: 0px; height: 100%; width: 50%;" class="jqx-widget-content jqx-splitter-panel jqx-reset jqx-splitter-panel-nested">
                    <div id="leftSplitter" class="jqx-splitter-nested jqx-reset jqx-splitter jqx-widget jqx-widget-content" style="width: 100%; height: 100%;">
                        <div style="left: 0px; top: 0px; width: 100%; height: 50%;" class="jqx-widget-content jqx-splitter-panel jqx-reset">
                            <textarea placeholder="输入 HTML 代码……" id="code-html" class="form-control" name="code" rows="11" style="display: none;"></textarea><div class="CodeMirror cm-s-default CodeMirror-wrap CodeMirror-empty" style="width: 100%; height: 100%;"><div style="overflow: hidden; position: relative; width: 3px; height: 0px; top: 4px; left: 34px;"><textarea style="position: absolute; bottom: -1em; padding: 0px; width: 1px; height: 1em; outline: none;" wrap="off" autocorrect="off" autocapitalize="none" spellcheck="false" tabindex="0"></textarea></div><div class="CodeMirror-vscrollbar" tabindex="-1" cm-not-content="true" style="width: 18px; pointer-events: none;"><div style="min-width: 1px; height: 0px;"></div></div><div class="CodeMirror-hscrollbar" tabindex="-1" cm-not-content="true" style="height: 18px; pointer-events: none;"><div style="height: 100%; min-height: 1px; width: 0px;"></div></div><div class="CodeMirror-scrollbar-filler" cm-not-content="true"></div><div class="CodeMirror-gutter-filler" cm-not-content="true"></div><div class="CodeMirror-scroll" tabindex="-1" draggable="true"><div class="CodeMirror-sizer" style="margin-left: 30px; margin-bottom: 0px; border-right-width: 30px; min-height: 26px; padding-right: 0px; padding-bottom: 0px;"><div style="position: relative; top: 0px;"><div class="CodeMirror-lines" role="presentation"><div style="position: relative; outline: none;" role="presentation"><pre style="height: 0px; overflow: visible; direction: ltr;" class="CodeMirror-placeholder">输入 HTML 代码……</pre><div class="CodeMirror-measure"><span><span>​</span>x</span></div><div class="CodeMirror-measure"></div><div style="position: relative; z-index: 1;"></div><div class="CodeMirror-cursors"><div class="CodeMirror-cursor" style="left: 4px; top: 0px; height: 18px;">&nbsp;</div></div><div class="CodeMirror-code" role="presentation"><div style="position: relative;"><div class="CodeMirror-gutter-wrapper" style="left: -30px;"><div class="CodeMirror-linenumber CodeMirror-gutter-elt" style="left: 0px; width: 21px;">1</div></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation"><span cm-text="">​</span></span></pre></div></div></div></div></div></div><div style="position: absolute; height: 30px; width: 1px; border-bottom: 0px solid transparent; top: 26px;"></div><div class="CodeMirror-gutters" style="height: 56px;"><div class="CodeMirror-gutter CodeMirror-linenumbers" style="width: 29px;"></div></div></div></div>
                            <a href="javascript:void(0);" class="windowLabel" data-panel="js">
                                <span class="label">
                                    HTML
                                </span>
                                <i class="fab fa-html5"></i>
                            </a>
                        </div><div class="jqx-splitter-splitbar-horizontal jqx-fill-state-normal" style="width: 100%; height: 5px; top: 310px;"><div class="jqx-splitter-collapse-button-horizontal jqx-fill-state-pressed" style="height: 5px; width: 45px; position: relative; left: 50%; top: 0px; margin-left: -23px; margin-top: 0px;"></div></div>
                        <div style="left: 0px; top: 317px; width: 100%; height: 48.8691%;" class="jqx-widget-content jqx-splitter-panel jqx-reset">
                            <textarea placeholder="输入 JavaScript 代码……" id="code-js" class="form-control" name="code" rows="10" style="display: none;"></textarea><div class="CodeMirror cm-s-default CodeMirror-wrap CodeMirror-empty" style="width: 100%; height: 100%;"><div style="overflow: hidden; position: relative; width: 3px; height: 0px; top: 4px; left: 34px;"><textarea style="position: absolute; bottom: -1em; padding: 0px; width: 1px; height: 1em; outline: none;" wrap="off" autocorrect="off" autocapitalize="none" spellcheck="false" tabindex="0"></textarea></div><div class="CodeMirror-vscrollbar" tabindex="-1" cm-not-content="true" style="width: 18px; pointer-events: none;"><div style="min-width: 1px; height: 0px;"></div></div><div class="CodeMirror-hscrollbar" tabindex="-1" cm-not-content="true" style="height: 18px; pointer-events: none;"><div style="height: 100%; min-height: 1px; width: 0px;"></div></div><div class="CodeMirror-scrollbar-filler" cm-not-content="true"></div><div class="CodeMirror-gutter-filler" cm-not-content="true"></div><div class="CodeMirror-scroll" tabindex="-1" draggable="true"><div class="CodeMirror-sizer" style="margin-left: 30px; margin-bottom: 0px; border-right-width: 30px; min-height: 26px; padding-right: 0px; padding-bottom: 0px;"><div style="position: relative; top: 0px;"><div class="CodeMirror-lines" role="presentation"><div style="position: relative; outline: none;" role="presentation"><pre style="height: 0px; overflow: visible; direction: ltr;" class="CodeMirror-placeholder">输入 JavaScript 代码……</pre><div class="CodeMirror-measure"><pre><span>xxxxxxxxxx</span></pre><div class="CodeMirror-linenumber CodeMirror-gutter-elt"><div>1</div></div></div><div class="CodeMirror-measure"></div><div style="position: relative; z-index: 1;"></div><div class="CodeMirror-cursors"><div class="CodeMirror-cursor" style="left: 4px; top: 0px; height: 18px;">&nbsp;</div></div><div class="CodeMirror-code" role="presentation"><div style="position: relative;"><div class="CodeMirror-gutter-wrapper" style="left: -30px;"><div class="CodeMirror-linenumber CodeMirror-gutter-elt" style="left: 0px; width: 21px;">1</div></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation"><span cm-text="">​</span></span></pre></div></div></div></div></div></div><div style="position: absolute; height: 30px; width: 1px; border-bottom: 0px solid transparent; top: 26px;"></div><div class="CodeMirror-gutters" style="height: 56px;"><div class="CodeMirror-gutter CodeMirror-linenumbers" style="width: 29px;"></div></div></div></div>
                            <a href="javascript:void(0);" class="windowLabel" data-panel="js">
                                <span class="label">
                                    JavaScript
                                </span>
                                <i class="fab fa-js"></i>
                            </a>
                        </div>
                    </div>
                </div><div class="jqx-splitter-splitbar-vertical jqx-fill-state-normal" style="height: 100%; width: 5px; left: 747px;"><div class="jqx-splitter-collapse-button-vertical jqx-fill-state-pressed" style="width: 5px; height: 45px; position: relative; top: 50%; left: 0px; margin-top: -23px; margin-left: 0px;"></div></div>
                <div style="left: 754px; top: 0px; height: 100%; width: 49.5315%;" class="jqx-widget-content jqx-splitter-panel jqx-reset jqx-splitter-panel-nested">
                    <div id="rightSplitter" class="jqx-splitter-nested jqx-reset jqx-splitter jqx-widget jqx-widget-content" style="width: 100%; height: 100%;">
                        <div style="left: 0px; top: 0px; width: 100%; height: 50%;" class="jqx-widget-content jqx-splitter-panel jqx-reset">
                            <textarea placeholder="输入 CSS 代码……" id="code-css" class="form-control" rows="11" style="display: none;"></textarea><div class="CodeMirror cm-s-default CodeMirror-wrap CodeMirror-empty" style="width: 100%; height: 100%;"><div style="overflow: hidden; position: relative; width: 3px; height: 0px; top: 4px; left: 34px;"><textarea style="position: absolute; bottom: -1em; padding: 0px; width: 1px; height: 1em; outline: none;" wrap="off" autocorrect="off" autocapitalize="none" spellcheck="false" tabindex="0"></textarea></div><div class="CodeMirror-vscrollbar" tabindex="-1" cm-not-content="true" style="width: 18px; pointer-events: none;"><div style="min-width: 1px; height: 0px;"></div></div><div class="CodeMirror-hscrollbar" tabindex="-1" cm-not-content="true" style="height: 18px; pointer-events: none;"><div style="height: 100%; min-height: 1px; width: 0px;"></div></div><div class="CodeMirror-scrollbar-filler" cm-not-content="true"></div><div class="CodeMirror-gutter-filler" cm-not-content="true"></div><div class="CodeMirror-scroll" tabindex="-1" draggable="true"><div class="CodeMirror-sizer" style="margin-left: 30px; margin-bottom: 0px; border-right-width: 30px; min-height: 26px; padding-right: 0px; padding-bottom: 0px;"><div style="position: relative; top: 0px;"><div class="CodeMirror-lines" role="presentation"><div style="position: relative; outline: none;" role="presentation"><pre style="height: 0px; overflow: visible; direction: ltr;" class="CodeMirror-placeholder">输入 CSS 代码……</pre><div class="CodeMirror-measure"><pre><span>xxxxxxxxxx</span></pre><div class="CodeMirror-linenumber CodeMirror-gutter-elt"><div>1</div></div></div><div class="CodeMirror-measure"></div><div style="position: relative; z-index: 1;"></div><div class="CodeMirror-cursors"><div class="CodeMirror-cursor" style="left: 4px; top: 0px; height: 18px;">&nbsp;</div></div><div class="CodeMirror-code" role="presentation"><div style="position: relative;"><div class="CodeMirror-gutter-wrapper" style="left: -30px;"><div class="CodeMirror-linenumber CodeMirror-gutter-elt" style="left: 0px; width: 21px;">1</div></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation"><span cm-text="">​</span></span></pre></div></div></div></div></div></div><div style="position: absolute; height: 30px; width: 1px; border-bottom: 0px solid transparent; top: 26px;"></div><div class="CodeMirror-gutters" style="height: 56px;"><div class="CodeMirror-gutter CodeMirror-linenumbers" style="width: 29px;"></div></div></div></div>
                            <a href="javascript:void(0);" class="windowLabel" data-panel="js">
                                <span class="label">
                                    CSS
                                </span>
                                <i class="fab fa-css3-alt"></i>
                            </a>
                        </div><div class="jqx-splitter-splitbar-horizontal jqx-fill-state-normal" style="width: 100%; height: 5px; top: 310px;"><div class="jqx-splitter-collapse-button-horizontal jqx-fill-state-pressed" style="height: 5px; width: 45px; position: relative; left: 50%; top: 0px; margin-left: -23px; margin-top: 0px;"></div></div>
                        <div id="output" style="left: 0px; top: 317px; width: 100%; height: 48.8691%;" class="jqx-widget-content jqx-splitter-panel jqx-reset"><iframe frameborder="0" id="iframeResult"></iframe></div>
                    </div>
                </div>
            </div>
            </form>
            </div>
        </div>
    </div>
</div> 
<!-- 模态框（Modal） -->
<div class="modal fade" id="myModal" tabindex="-1" role="dialog" aria-labelledby="myModalLabel" aria-hidden="true">
   <div class="modal-dialog">
      <div class="modal-content">
         <div class="modal-header">
            <h5 class="modal-title"> 生成链接</h5>
            <button type="button" class="close" data-dismiss="modal" aria-label="Close">
            <span aria-hidden="true">×</span>
            </button>
         </div>
         <div class="modal-body">
           <div class="input-group">
           <div class="input-group-prepend"><span class="input-group-text">标题</span></div> 
             <input type="text" id="post_title" class="form-control" placeholder="请输入标题……">
              </div><br>
              <div class="alert alert-warning">提示！对于发布的内容我们会定期审核，对于违规或错误代码会进行删除处理。</div>
         </div>
         <div class="modal-footer">
            <button type="button" class="btn btn-outline-dark" data-dismiss="modal">关闭
            </button>
            <button type="button" class="btn btn-outline-success" id="save">
               保存代码
            </button>
         </div>
      </div><!-- /.modal-content -->
</div><!-- /.modal -->
</div>


<!-- 模态框（Modal）扩展库 -->
<div class="modal fade" id="libs" tabindex="-1" role="dialog" aria-labelledby="myModalLabel" aria-hidden="true">
   <div class="modal-dialog">
      <div class="modal-content">
         <div class="modal-header">
            <h5 class="modal-title">扩展库</h5>
            <button type="button" class="close" data-dismiss="modal" aria-label="Close">
            <span aria-hidden="true">×</span>
            </button>
           
           
         </div>
         <div class="modal-body">
          <form role="form">
                  <div class="input-group">
                  <div class="input-group-prepend"><span class="input-group-text">输入库名：</span></div>
                    <input type="text" class="form-control" id="filter" placeholder="搜索扩展库……">
                </div>
                <i id="fa-spinner" class="fa fa-spinner fa-pulse fa-3x fa-fw" style="display: none;padding: 10px;"></i>
                <table id="libs-table" class="table table-striped mt-2"></table>

            </form>
         </div>
         
      </div><!-- /.modal-content -->
</div><!-- /.modal -->
</div>

<script type="text/javascript">
$(document).ready(function () {
    var winHeight=0;
    if (window.innerHeight) {
        winHeight = window.innerHeight;
    } else if ((document.body) && (document.body.clientHeight)) {
        winHeight = document.body.clientHeight;
    }
    //通过深入Document内部对body进行检测，获取浏览器窗口高度
    if (document.documentElement && document.documentElement.clientHeight) {
        winHeight = document.documentElement.clientHeight;
    }
    $("#runcode").click(function() {
        submitTryit();
    }) ;
    $("#downloadCode").click(function() {
        
       // downloadCode = html_beautify(document.getElementById("iframeResult").contentWindow.document.documentElement.outerHTML,  { indent_size: 4, space_in_empty_paren: true });    
	    downloadCode = html_beautify(text,  { indent_size: 4, space_in_empty_paren: true });    
        download(downloadCode, "demo.html", "text/html");
    }) ;
    $("#isautorun").prop( "checked", true );
    height = (winHeight - 60) * 0.86;
    $('#splitContainer').jqxSplitter({ height: height, width: '100%', orientation: 'vertical', panels: [{ size: '50%' }, { size: '50%' }] });
    $('#leftSplitter').jqxSplitter({ height: '100%', width: '100%', orientation: 'horizontal',  panels: [{ size: '50%' }, { size: '50%'}] });
    $('#rightSplitter').jqxSplitter({ height: '100%', width: '100%', orientation: 'horizontal',  panels: [{ size: '50%' }, { size: '50%'}] });
});
// CM OPTIONS
var cm_opt = {
    mode: 'text/html',
    gutter: true,
    lineNumbers: true,
    autoCloseBrackets:true,
    lineWrapping: true,
    matchBrackets: true,
    //theme:'material',
    autoCloseTags:true
};
// HTML EDITOR
var html_box = document.querySelector('#code-html');
var html_editor = CodeMirror.fromTextArea(html_box, cm_opt);
//var isautorun = $('#isautorun').prop('checked');
html_editor.on('change',function (inst, changes) {
if($('#isautorun').prop('checked')) {
    submitTryit();
}
    
});
// CSS EDITOR
cm_opt.mode = 'css';
var css_box = document.querySelector('#code-css');
var css_editor = CodeMirror.fromTextArea(css_box, cm_opt);

    css_editor.on('change', function (inst, changes) {
    if($('#isautorun').prop('checked')) {
            submitTryit();
    }
    });

// JAVASCRIPT EDITOR
cm_opt.mode = 'javascript';
var js_box = document.querySelector('#code-js');
var js_editor = CodeMirror.fromTextArea(js_box, cm_opt);

    
    js_editor.on('change', function (inst, changes) {
    if($('#isautorun').prop('checked')) {
            submitTryit();
    }
    });
    
    $("#basehtml").click(function() {
    _html_code = "<!DOCTYPE html>\n<html>\n<head>\n<meta charset=\"utf-8\">\n<title>文档标题</title>\n</head>\n<body>\n\t<h1>我的第一个HTML页面</h1>\n\t<p>我的第一个段落。</p>\n</body>\n</html>\n";
    html_editor.getDoc().setValue(_html_code);
});


$("#librep").click(function(){ $("#libs").modal("show"); });
$( "select" ).change(function() {
    $( "select option:selected" ).each(function() {
        _thisvar = $(this).val();
        _inithtmlcode = html_editor.getValue();
        if(_thisvar=='more'){
            $("#libs").modal("show");
        } else if(_thisvar == 'jq') {
            _html_script_code = "<script src=\"https://cdn.staticfile.net/jquery/2.2.4/jquery.min.js\"><\/script>\n";
            html_editor.getDoc().setValue(_html_script_code + _inithtmlcode);
        }else if(_thisvar == 'bs3') {
            _html_script_code = "<link rel=\"stylesheet\" href=\"https://cdn.staticfile.net/twitter-bootstrap/3.3.7/css/bootstrap.min.css\">\n<script src=\"https://cdn.bootcss.com/jquery/2.2.4/jquery.min.js\"><\/script>\n<script src=\"https://cdn.bootcss.com/bootstrap/3.3.7/js/bootstrap.min.js\"><\/script>\n";
            html_editor.getDoc().setValue(_html_script_code + _inithtmlcode);
        }else if(_thisvar == 'bs4') {
            _html_script_code = "<link rel=\"stylesheet\" href=\"https://cdn.staticfile.net/twitter-bootstrap/4.6.0/css/bootstrap.min.css\">\n<script src=\"https://cdn.bootcss.com/jquery/2.2.4/jquery.min.js\"><\/script>\n<script src=\"https://cdn.bootcss.com/bootstrap/4.6.0/js/bootstrap.min.js\"><\/script>\n";
            html_editor.getDoc().setValue(_html_script_code + _inithtmlcode);
        }else if(_thisvar == 'ag') {
            _html_script_code = "<script src=\"https://cdn.staticfile.net/angular.js/1.6.6/angular.min.js\"><\/script>\n";
            html_editor.getDoc().setValue(_html_script_code + _inithtmlcode);
        }else if(_thisvar == 'vue2') {
            _html_script_code = "<script src=\"https://cdn.staticfile.net/vue/2.2.2/vue.min.js\"><\/script>\n";
            html_editor.getDoc().setValue(_html_script_code + _inithtmlcode);
        }else if(_thisvar == 'vue3') {
            _html_script_code = "<script src=\"https://cdn.staticfile.net/vue/3.2.33/vue.global.js\"><\/script>\n";
            html_editor.getDoc().setValue(_html_script_code + _inithtmlcode);
        }else if(_thisvar == 'fa') {
            _html_script_code = "<link rel=\"stylesheet\" href=\"https://cdn.staticfile.net/font-awesome/4.7.0/css/font-awesome.min.css\">\n";
            html_editor.getDoc().setValue(_html_script_code + _inithtmlcode);
        }
    });
});

$('#libs').on('hidden.bs.modal', function () {
    $("#sel1 option:first-child").attr('selected', true);
    $("#sel1 option:last-child").attr('selected', false);
    $("#libs-table tr").removeClass("success");
})


$("#filter").keyup(function() {
    _search_value = $(this).val();
    //https://api.staticfile.net/libraries
    //https://api.cdnjs.com/libraries
    $.get('https://api.staticfile.net/libraries',{search:_search_value,fields:"homepage"},function(data) {
        var _val_tr ='';
        $("#fa-spinner").show();
        $.each(data.results, function(i, item) {
            if(i < 10) {
                _val_tr += '<tr><td>'+item.name+' </td><td>'+item.latest+'</td><td>&nbsp;&nbsp;<i class="fa fa-paper-plane" aria-hidden="true"></i>&nbsp;&nbsp;</td></tr>';
            } else {
                return false;
            };
        });
        if(_val_tr) {
            $("#libs-table").html('<tr><th>库名</th><th>地址</th><th>插入</th></tr>' + _val_tr);
        }
        $("#fa-spinner").hide();
    });
});
$( document ).ajaxComplete(function() {
    $("tr").not(':first').hover(
        function () {
            if(!$(this).hasClass("success")) {
                $(this).addClass("warning");
            }
        },
        function () {
            $(this).removeClass("warning");
        }
    );
    $("tr").not(':first').click(function() {
        if(!$(this).hasClass("success")) {
            _editor_content = html_editor.getValue();
            $(this).addClass("success")
            $(this).removeClass("warning");
            _libsrc = $(this).find("td").eq(1).text();
            if(_editor_content.indexOf(_libsrc) !== -1 ) {
                return;
            }
            if( _libsrc.indexOf('.js')!==-1 ){
                _libsrc = '<script src="'+_libsrc+'"><\/script>\n';
            } else if(_libsrc.indexOf('.css')!==-1) {
                _libsrc = '<link rel="stylesheet" href="'+_libsrc+'">\n';
            } 
            
            patternBody = /<body[^>]*>((.|[\n\r])*)<\/body>/im;
            array_matches_body = patternBody.exec(_editor_content);
            patternHead = /<head[^>]*>((.|[\n\r])*)<\/head>/im;
            array_matches_head = patternHead.exec(_editor_content); 
            
            if(array_matches_head) {
                _editor_content = _editor_content.replace('</head>', _libsrc + '</head>');
                
            } else if(array_matches_body) {
                _editor_content = _editor_content.replace('</body>', _libsrc + '</body>');
            } else {
                _editor_content = _libsrc + _editor_content;
            }
            html_editor.getDoc().setValue(_editor_content);
        } 
    });
});

$("#save").click(function() {
    post_title = $("#post_title").val().trim();
    var isnum = /^\d+$/.test(post_title);
    var isletter = /^[a-zA-Z]+$/.test(post_title);
    if( isnum ) {
        alert("请认真填写标题！");
    } else if( isletter ) {
        alert("加点中文描述，大家更容易理解！");
    }else if(post_title=="" || post_title.length<6) {
        alert("标题不能为空且不能少于6个字符……");
    } else {
        var htmlSource = html_editor.getValue(),
        cssSource = css_editor.getValue(),
        jsSource = js_editor.getValue(),
        post_content = '';
        if(htmlSource!='' || jsSource!='' || cssSource!='') {
            $.post("/savecode.php", {post_title:post_title, html: htmlSource, js: jsSource, css:cssSource,filename: ""}, function(data){
                
                if(data.errno) {
                    alert(data.msg)
                } else {
                    $("#save").prop('disabled',false);
                    alert(data.msg)
                    window.location.href = data.url
                }
                
            }, "json");
        } else {
            alert("请输入你要展示的代码……");
        }
    }
        
});
html_editor.setSize('100%','100%');
js_editor.setSize('100%', '100%');
css_editor.setSize('100%','100%');




function submitTryit() {
    // 基础模板
    
    var html = html_editor.getValue(),
    css = css_editor.getValue(),
    js = js_editor.getValue(),
    src = html;
    if (html) {
        var patternHtmlTag = /<html([^>]*)>/im;
        var array_matches_html_tag = patternHtmlTag.exec(src);
        if (array_matches_html_tag) {
            src = src.replace('<html>', '<html ' + array_matches_html_tag[1] + '>');
        }
        var patternHead = /<head[^>]*>((.|[\n\r])*)<\/head>/im
        var array_matches_head = patternHead.exec(src);

        var patternBodyTag = /<body([^>]*)>/im;
        var array_matches_body_tag = patternBodyTag.exec(src);
        if (array_matches_body_tag) {
            src = src.replace('<body>', '<body ' + array_matches_body_tag[1] + '>');
        } 
        
    } 
    //console.log(css);
    if (css.indexOf('<style>') !== -1) {
        $(".alert-danger span").text('CSS 编辑框不需要 <style> 标签');
        $(".alert-danger").show().delay(5000).fadeOut();
        return;
    } else if (js.indexOf('<script>') !== -1) {
        $(".alert-danger span").text('JavaScript 编辑框不需要 <script> 标签');
        $(".alert-danger").show().delay(5000).fadeOut();
        return;
    } else {
        $(".alert-danger").hide();
    }

    // CSS
    if(css) {
        css = '\n<style>\n' + css + '\n</style>\n';
        if (array_matches_head) {
            src = src.replace('</head>', css + '</head>');
        } else if (array_matches_body_tag) {
            src = src.replace('</body>', css + '</body>');
        } else {
            src +=  css;
        }
    }

    // Javascript
    if(js) {
        js = '\n<script>\n' + js + '\n<\/script>\n';
        if (array_matches_body_tag) {
            src = src.replace('</body>', js + '</body>');
        }else {
            src +=  js;
        }
    }

    text = src;
    var ifr = document.createElement("iframe");
    ifr.setAttribute("frameborder", "0");
    ifr.setAttribute("id", "iframeResult");
    document.getElementById("output").innerHTML = "";
    document.getElementById("output").appendChild(ifr);

    var ifrw = (ifr.contentWindow) ? ifr.contentWindow: (ifr.contentDocument.document) ? ifr.contentDocument.document: ifr.contentDocument;
    ifrw.document.open();
    ifrw.document.write(text);
    ifrw.document.close();
    autodivheight();
}
submitTryit();
window.addEventListener("resize", autodivheight);
function autodivheight(){
    var winHeight=0;
    if (window.innerHeight) {
        winHeight = window.innerHeight;
    } else if ((document.body) && (document.body.clientHeight)) {
        winHeight = document.body.clientHeight;
    }
    //通过深入Document内部对body进行检测，获取浏览器窗口高度
    if (document.documentElement && document.documentElement.clientHeight) {
        winHeight = document.documentElement.clientHeight;
    }
    height = height = (winHeight - 60) * 0.86;
    document.getElementById("splitContainer").style.height= height +"px";
}
</script>

</div>


<script src="res/bootstrap.bundle.min.js" crossorigin="anonymous"></script>
<div>
<script>
var _hmt = _hmt || [];
(function() {
  var hm = document.createElement("script");
  hm.src = "https://hm.baidu.com/hm.js?68c6d4f0f6c20c5974b17198fa6fd40a";
  var s = document.getElementsByTagName("script")[0]; 
  s.parentNode.insertBefore(hm, s);
})();
</script>
</div>



</body><volc-translate style="position: fixed; top: 0px; left: 0px; width: 0px; height: 0px; z-index: 2147483647;"></volc-translate></html>
